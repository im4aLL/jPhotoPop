(function(e){var g={group:"jPhotoPopGroup",single:"jPhotoPopSingle"};var a="";var c="";var l="";var d=0;function i(m,n,p,o,q){n=typeof n!=="undefined"?"overlay-"+n:"default";p=typeof p!=="undefined"?p:"null";o=typeof o!=="undefined"?o:"null";if(q==null){q={className:"null"}}var r='<div class="jPhotoPop-overlay '+n+'"><div class="jPhotoPop-overlay-wrapper"><span class="jPhotoPop-overlay-content"><img src="'+m+'"></span></div><span class="jppicon" id="jppclose"></span>'+((p!="null")?'<a class="jppicon" id="jppnext" href="#" rel='+p+' name="'+q.className+'"></a>':"")+((o!="null")?'<a class="jppicon" id="jppprev" href="#" rel='+o+' name="'+q.className+'"></a>':"")+"</div>";e("body .jPhotoPop-overlay").remove();e("body").prepend(r);if(d===0){e(".jPhotoPop-overlay").css("opacity",0);e(".jPhotoPop-overlay").animate({opacity:1},"fast")}e(".jPhotoPop-overlay-content *").hide();e(".jPhotoPop-overlay-content").addClass("jloading");e(".jPhotoPop-overlay-content img:first").bind("load",function(){e(".jPhotoPop-overlay-content *").show();e(".jPhotoPop-overlay-content").removeClass("jloading")});b()}function h(m){var n=0;n=e("."+m).length;return n}function f(n,r){var q=0;var m=0;var p=0;var o=0;q=h(n);m=r.index();p=e("."+n+":last").index();o=(m-(p-q))-1;return o}function k(r,t,m){var o=0;var q=0;var p=0;var u=0;var w=0;var n=0;var v=0;q=f(r,t);p=q+1;u=q-1;o=h(r)-1;if(u<0){u=o}if(p>o){p=0}e(".jPoped").removeClass("jPoped");if(m=="next"){e("."+r).eq(p).addClass("jPoped");n=p-1;v=p+1;w=1}else{if(m=="prev"){e("."+r).eq(u).addClass("jPoped");n=u-1;v=u+1;w=1}else{t.addClass("jPoped")}}if(v>o){v=0}if(n<0){n=o}if(w==0){c=e("."+r).eq(p).attr("href");l=e("."+r).eq(u).attr("href")}else{c=e("."+r).eq(v).attr("href");l=e("."+r).eq(n).attr("href")}var s={nextP:c,prevP:l};return s}function b(){e("html").css("overflow-y","hidden")}function j(){e("html").css("overflow-y","scroll")}e("#jppnext").live("click",function(){d=1;var n=e(this).attr("rel");var o=e(this).attr("name");var m=e(".jPoped");var p=k(o,m,"next");var q={className:o};i(n,o,p.nextP,p.prevP,q);return false});e("#jppprev").live("click",function(){d=1;var n=e(this).attr("rel");var o=e(this).attr("name");var m=e(".jPoped");var p=k(o,m,"prev");var q={className:o};i(n,o,p.nextP,p.prevP,q);return false});e("#jppclose").live("click",function(){e("body .jPhotoPop-overlay").animate({opacity:0},"fast",function(){e("body .jPhotoPop-overlay").remove()});e(".jPoped").removeClass("jPoped");d=0;j()});e(".jPhotoPop-overlay-content, #jppclose, #jppnext, #jppprev").live("click",function(m){m.stopPropagation()});e(".jPhotoPop-overlay").live("click",function(){var m=e(this);m.animate({opacity:0},"fast",function(){m.remove()});e(".jPoped").removeClass("jPoped");d=0;j()});e.fn.extend({jPhotoPop:function(m){var o={single:true,group:false};var n=e.extend(o,m);return this.each(function(){var p=e(this);if(n.group===true){p.addClass(g.group)}else{if(n.single===true){p.addClass(g.single)}}if(n.group===true){p.click(function(){var r=k(g.group,p);var q=p.attr("class").split(" ");var s={className:q[1]};a=e(this).attr("href");i(a,g.group,r.nextP,r.prevP,s);return false})}else{if(n.single===true){p.click(function(){a=e(this).attr("href");i(a,g.single);return false})}}})}})})(jQuery);